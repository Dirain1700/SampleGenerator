{"version":3,"file":"index.js","mappings":";;;;;;;;;;AAAa;AACb,mBAAmB,mBAAO,CAAC,mCAAS;AACpC;AACA;AACA;AACA;;;;;;;;;;;ACLa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,kCAAkC;AAChE;AACA;AACA;AACA;AACA;AACA,6BAA6B,4FAA4F;AACzH;AACA;AACA;AACA,oDAAoD,kBAAkB,aAAa;AACnF;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,GAAG;AAChE;AACA;AACA,2BAA2B,iBAAiB,GAAG,4BAA4B,UAAU,iCAAiC;AACtH;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,iBAAiB,GAAG,uCAAuC;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,oBAAoB,uBAAuB;AACjF;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,eAAe;AACf,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,CAEL;AACD;;;;;;;UC/KA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;UEtBA;UACA;UACA;UACA;UACA","sources":["webpack://womf/./dist/js/index.js","webpack://womf/./dist/js/tools.js","webpack://womf/webpack/bootstrap","webpack://womf/webpack/before-startup","webpack://womf/webpack/startup","webpack://womf/webpack/after-startup"],"sourcesContent":["\"use strict\";\nvar import_tools = require(\"./tools\");\nimport_tools.Tools.setLinksToInputFromCookies();\nimport_tools.Tools.setOnTextInput();\nimport_tools.Tools.setOnGenerateButtonClick();\n//# sourceMappingURL=index.js.map\n","\"use strict\";\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\nvar tools_exports = {};\n__export(tools_exports, {\n  Tools: () => Tools\n});\nmodule.exports = __toCommonJS(tools_exports);\nclass Tools {\n  static cookieName = \"pokepastlinks\";\n  static cookieExpireTime = 7 * 24 * 60 * 60 * 1e3;\n  // 7 days\n  static inputTextAreaId = \"linksInput\";\n  static generateButtonId = \"generateHTML\";\n  static generatedCodeStyleId = \"htmlStyle\";\n  static outputTextAreaId = \"htmlCode\";\n  static linkRegex = /(https:\\/\\/)?pokepast\\.es\\/[a-zA-Z0-9]{16}/gm;\n  static storeLinksToCookies(links) {\n    const cookieExpireDate = new Date(Date.now() + Tools.cookieExpireTime);\n    const cookieValue = `${Tools.cookieName}=${encodeURIComponent(links)}; expires=${cookieExpireDate.toUTCString()}; path=/`;\n    document.cookie = cookieValue;\n  }\n  static getLinksFromCookies() {\n    if (document.cookie === \"\") {\n      return \"\";\n    }\n    const cookies = document.cookie.split(\"; \");\n    for (const cookie of cookies) {\n      if (cookie.startsWith(Tools.cookieName)) {\n        return decodeURIComponent(cookie.split(\"=\")[1]);\n      }\n    }\n    return \"\";\n  }\n  static clearCookies() {\n    document.cookie = `${Tools.cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/`;\n  }\n  static setLinksToInputFromCookies() {\n    const links = Tools.getLinksFromCookies();\n    if (links !== \"\") {\n      const inputTextArea = document.getElementById(Tools.inputTextAreaId);\n      if (!inputTextArea) throw new Error(\"Input text area not found\");\n      inputTextArea.value = links;\n    }\n  }\n  static setOnTextInput() {\n    const inputTextArea = document.getElementById(Tools.inputTextAreaId);\n    if (!inputTextArea) throw new Error(\"Input text area not found\");\n    inputTextArea.addEventListener(\"input\", () => Tools.onTextInput());\n  }\n  static onTextInput() {\n    const inputTextArea = document.getElementById(Tools.inputTextAreaId);\n    if (!inputTextArea) throw new Error(\"Input text area not found\");\n    Tools.storeLinksToCookies(inputTextArea.value);\n  }\n  static copyHTMLToClipboard() {\n    const outputTextArea = document.getElementById(Tools.outputTextAreaId);\n    if (!outputTextArea) throw new Error(\"Output text area not found\");\n    outputTextArea.focus();\n    void navigator.clipboard.writeText(outputTextArea.value);\n  }\n  static fetchTeam(link) {\n    return fetch(link + \"/json\", {\n      headers: {\n        accept: \"*/*\",\n        \"sec-ch-ua\": '\"Google Chrome\";v=\"125\", \"Chromium\";v=\"125\", \"Not.A/Brand\";v=\"24\"',\n        \"sec-ch-ua-mobile\": \"?0\",\n        \"sec-ch-ua-platform\": '\"Windows\"'\n      },\n      referrer: \"127.0.0.1\",\n      referrerPolicy: \"strict-origin-when-cross-origin\",\n      body: null,\n      method: \"GET\",\n      mode: \"cors\",\n      credentials: \"omit\"\n    }).then((response) => response.json()).then((team) => {\n      const pokemons = team.paste.split(\"\\n\").filter((l) => l.includes(\"@\")).map((l) => l.split(\"@\")[0].split(\"(\")[0].trim());\n      return { pokemons, author: team.author, title: team.title, link };\n    });\n  }\n  static isPokepastLink(link) {\n    return Tools.linkRegex.test(link);\n  }\n  static onGenerateButtonClick() {\n    const inputTextArea = document.getElementById(Tools.inputTextAreaId);\n    const outputTextArea = document.getElementById(Tools.outputTextAreaId);\n    if (!inputTextArea || !outputTextArea) throw new Error(\"Input text area not found\");\n    const links = (inputTextArea.value?.split(\"\\n\") ?? []).map((l) => l.trim());\n    const style = document.getElementById(Tools.generatedCodeStyleId);\n    if (!style) throw new Error(\"Please select a style\");\n    Promise.all(links.map((l) => Tools.fetchTeam(l))).then((teams) => {\n      const code = Tools.generateHTMLCode(teams.filter((t) => t !== null), style.value);\n      outputTextArea.value = code;\n      Tools.copyHTMLToClipboard();\n    }).catch((e) => console.error(e));\n  }\n  static setOnGenerateButtonClick() {\n    const generateButton = document.getElementById(Tools.generateButtonId);\n    if (!generateButton) throw new Error(\"Generate button not found\");\n    generateButton.addEventListener(\"click\", () => {\n      Tools.onGenerateButtonClick();\n    });\n  }\n  static generateHTMLCode(teams, style) {\n    switch (style) {\n      case \"ou\": {\n        return Tools.generateOUStyle(teams);\n      }\n      case \"uu\": {\n        return Tools.generateUUStyle(teams);\n      }\n      case \"uber\": {\n        return Tools.generateOldUberStyle(teams);\n      }\n      default: {\n        throw style;\n      }\n    }\n  }\n  static generateOUStyle(teams) {\n    let code = \"\";\n    for (const team of teams) {\n      const last = team.pokemons[team.pokemons.length - 1];\n      for (const pokemon of team.pokemons) {\n        code += '<a href=\"//dex.pokemonshowdown.com/pokemon/' + pokemon + '\" target=\"_blank\" rel=\"noopener\"><psicon pokemon=\"' + pokemon + '\"></a>';\n        if (pokemon !== last) code += \"|\";\n        else\n          code += '- <b><a href=\"' + team.link + '\" target=\"_blank\" rel=\"noopener\">' + team.title + \" by \" + team.author + \"</a></b>\";\n      }\n    }\n    return code;\n  }\n  static generateUUStyle(teams) {\n    let code = \"\";\n    const limit = teams.length - 1;\n    const i = 0;\n    for (const team of teams) {\n      code += team.title + \" by \" + team.author + '<br><a href=\"' + team.link + '\" target=\"_blank\" rel=\"noopener\">' + team.link + \"</a>\";\n      if (i !== limit) code += \"<br>\";\n    }\n    return code;\n  }\n  static generateOldUberStyle(teams) {\n    let code = '<ul style=\"list-style-type: none\">';\n    for (const team of teams) {\n      code += '<li style=\"margin-bottom: 5px\">';\n      code += \"<i>\" + team.title + \" by <b>\" + team.author + '</b></i><br><a href=\"' + team.link + '\" style=\"text-decoration: none\" target=\"_blank\" rel=\"noopener\">';\n      for (const pokemon of team.pokemons) {\n        code += '<psicon pokemon=\"' + pokemon + '\">';\n      }\n      code += \"</a></li>\";\n    }\n    code += \"</ul>\";\n    return code;\n  }\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  Tools\n});\n//# sourceMappingURL=tools.js.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\n__webpack_require__(\"./dist/js/tools.js\");\nvar __webpack_exports__ = __webpack_require__(\"./dist/js/index.js\");\n",""],"names":[],"sourceRoot":""}